<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>头部和菜单</title>
</head>
<script type="text/javascript">
    //当前系统时间
    function getCurDate() {
        var d = new Date();
        var week;
        switch (d.getDay()) {
            case 1:
                week = "周一";
                break;
            case 2:
                week = "周二";
                break;
            case 3:
                week = "周三";
                break;
            case 4:
                week = "周四";
                break;
            case 5:
                week = "周五";
                break;
            case 6:
                week = "周六";
                break;
            default:
                week = "周日";
        }
        var years = d.getFullYear();
        var month = add_zero(d.getMonth() + 1);
        var days = add_zero(d.getDate());
        var hours = add_zero(d.getHours());
        var minutes = add_zero(d.getMinutes());
        var seconds = add_zero(d.getSeconds());
        var ndate = years + "/" + month + "/" + days + " " + hours + ":" + minutes + ":" + seconds + " " + week;
        divT.innerHTML = ndate;
    }
    setInterval("getCurDate()", 100);
</script>
<body>
<!-- header -->
<header class="main-header">
    <!-- Logo -->
    <a href="javascript:void(0);" class="logo">
        <!-- mini logo for sidebar mini 50x50 pixels -->
        <span class="logo-mini">选课</span>
        <!-- logo for regular state and mobile devices -->
        <span class="logo-lg">材料学院选课系统</span>
    </a>
    <!-- 头部导航 -->
    <nav class="navbar navbar-static-top">
        <!-- 切换导航-->
        <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">切换导航</span>
        </a>
        <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
                <li class="dropdown messages-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white;">
                        <i class="fa fa-clock-o"></i>
                        <span id="divT" class="hidden-xs"></span>
                    </a>
                </li>
                <li class="dropdown messages-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white;">
                        <i class="fa  fa-calendar"></i>
                        <span class="hidden-xs">${sessionScope.Today}</span>
                    </a>
                </li>
                <!-- 你的信息-->
                <li class="dropdown messages-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-envelope-o"></i>
                        <span class="label label-success">${sessionScope.msgcount}</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="header">你有${sessionScope.msgcount}个消息</li>
                        <li class="footer"><a href="javascript:void(0)" onclick="lookMessag('${user.id}','${user.role_id}')">看到所有的消息</a></li>
                    </ul>
                </li>
                <!-- 个人信息 -->
                <li class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <img src="<%=basePath%>webapp/dist/img/${sessionScope.Role_img}" class="user-image" alt="User Image">
                        <span class="hidden-xs">${sessionScope.role_name}</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="user-header">
                            <img src="<%=basePath%>webapp/dist/img/${sessionScope.Role_img}" class="img-circle" alt="User Image">

                            <p>
                                ${sessionScope.role_name}
                                <small>${sessionScope.Role_remark}</small>
                            </p>
                        </li>
                        <li class="user-footer">
                            <div class="pull-left">
                                <a href="javascript:void(0)" onclick="IntoUserInfo()" class="btn btn-default btn-flat">个人信息</a>
                            </div>
                            <div class="pull-right">
                                <a href="javascript:if(confirm('确定要退出吗?'))location='<%=basePath%>logout'" class="btn btn-default btn-flat">退出</a>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="dropdown messages-menu">
                    <a href="javascript:if(confirm('确定要退出吗?'))location='<%=basePath%>logout'"  class="dropdown-toggle" data-toggle="dropdown" style="color: white;">
                        <i class="glyphicon glyphicon-off"></i>
                        <span class="hidden-xs">退出</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!-- 左边导航 -->
<aside class="main-sidebar">
    <section class="sidebar">
        <div class="user-panel">
            <div class="pull-left image">
                <img src="../../dist/img/${sessionScope.Role_img}" class="img-circle" alt="User Image">
            </div>
            <div class="pull-left info">
                <p>${sessionScope.role_name}</p>
                <a>${sessionScope.reale}</a>
            </div>
        </div>
        <!-- 左边导航栏 -->
        <ul class="sidebar-menu">
            <li class="header">主导航</li>
            <li class="treeview active" th:each="menu : ${sessionScope.menuList}">
                <a href="#">
                    <i class="${menu.menu_pic}"></i></li>
                    <span th:text="${menu.menu_name}">Multilevel</span>
                    <span class="pull-right-container">
			              <i class="fa fa-angle-left pull-right"></i>
			            </span>
                </a>
                <ul class="treeview-menu">
                    <li><a th:each="sub : ${menu.subMenu()}" th:href="@{${sub.menu_url}}" th:text="${sub.menu_name}"><i class="fa fa-circle-o"></i>Link in level 2</a></li>
                </ul>
            </li>
            </c:forEach>
            </c:when>
            </c:choose>
            </li>
        </ul>
    </section>
    <!-- /.sidebar -->
</aside>
</body>
<script type="text/javascript">
    function IntoUserInfo(){
        //重置表单 刷新页面
        var myForm = document.createElement("form");
        myForm.method = "post";
        myForm.action ="IntoGetUserInfo.do";
        var myInput = document.createElement("input");
        myForm.appendChild(myInput);
        document.body.appendChild(myForm);
        myForm.submit();
        document.body.removeChild(myForm);  // 提交后移除创建的form
    }

    function lookMessag(id,role_id){
        var myForm = document.createElement("form");
        myForm.method = "post";
        myForm.action ="systemset/getMylatestNotice.do";
        var myInput = document.createElement("input");
        myInput.setAttribute("name", "id");  // 为input对象设置name
        myInput.setAttribute("value", id);  // 为input对象设置
        myForm.appendChild(myInput);
        var myInput1 = document.createElement("input");
        myInput1.setAttribute("name", "role_id");  // 为input对象设置name
        myInput1.setAttribute("value", role_id);  // 为input对象设置
        myForm.appendChild(myInput1);
        document.body.appendChild(myForm);
        myForm.submit();
        document.body.removeChild(myForm);  // 提交后移除创建的form

    }
    function loginout(){
        if(confirm('确定要退出吗?')){
            location.href="<%=basePath%>logout";
        }
    }
</script>
</html>